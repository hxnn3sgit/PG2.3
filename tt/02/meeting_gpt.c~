#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct {
    char *vorname;
    char *nachname;
} Name;

void begruesseTeilnehmer(Name *teilnehmer, int anzahl) {
    for (int i = 0; i < anzahl; ++i) {
        printf("Hallo %s\n", teilnehmer[i].vorname);
    }
}

int main(int argc, char *argv[]) {
    if (argc < 2) {
        printf("Bitte Namen als Argumente angeben.\n");
        return 1;
    }

    Name *teilnehmer = (Name*)malloc((argc - 1) * sizeof(Name));

    for (int i = 1; i < argc; ++i) {
        char *token = strtok(argv[i], " ");
        teilnehmer[i - 1].vorname = (char*)malloc((strlen(token) + 1) * sizeof(char));
        strcpy(teilnehmer[i - 1].vorname, token);

        token = strtok(NULL, " ");
        teilnehmer[i - 1].nachname = (char*)malloc((strlen(token) + 1) * sizeof(char));
        strcpy(teilnehmer[i - 1].nachname, token);
    }

    begruesseTeilnehmer(teilnehmer, argc - 1);

    // Speicher freigeben
    for (int i = 0; i < argc - 1; ++i) {
        free(teilnehmer[i].vorname);
        free(teilnehmer[i].nachname);
    }
    free(teilnehmer);

    return 0;
}
